<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Kyungjae's Website</title>
<link rel="icon" type="image/x-icon" href="img/favicon.png">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left: 0.25em solid rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.mac-os #write{
    caret-color: AccentColor;
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



</style>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><p><a href='../../'><span>Home</span></a><span> | </span><a href='../../projects'><span>Projects</span></a><span> | </span><a href='../'><span>Notes</span></a><span> &gt; </span><a href="./"><span>MCU Peripheral Drivers</span></a><span> &gt; I2C Driver (</span><code>stm32f407xx_i2c_driver.h/.c</code><span>)</span></p><h1 id='i2c-driver-stm32f407xxi2cdriverhc'><span>I2C Driver (</span><code>stm32f407xx_i2c_driver.h/.c</code><span>)</span></h1><p>&nbsp;</p><h2 id='spi-driver-api-requirements'><span>SPI Driver API Requirements</span></h2><ul><li><p><span>I2C initialization</span></p><ol start='' ><li><p><span>Configure the mode (e.g., standard, fast, ...)</span></p></li><li><p><span>Configure the serial clock (SCL) speed (e.g., 25 KHz, 50 KHz, 100 KHz, 200 KHz, 400 KHz, ...)</span></p><p><span>When using higher frequency, the length of the communication wire must be short.</span></p><blockquote><p><span>In STM32F4x I2C peripheral, CR2 and CCR registers are used to control the I2C serial clock settings and other I2C timings like setup time and hold time.</span></p></blockquote></li><li><p><span>Configure the device address (Applicable only when the device is slave.)</span></p></li><li><p><span>Enable ACKing (For STM32F407xx MCUs, ACKing is disabled by default.)</span></p></li><li><p><span>Configure the rise time (the time it takes for the signal to reach the VCC level from the GND level) for I2C pins (Also called as &quot;slew rate&quot;)</span></p></li></ol><p><span>All of the above configuration must be done while the I2C peripheral is in DISABLED state. (Check the control register!)</span></p></li><li><p><span>I2C master Tx</span></p><ul><li><p><span>Since in I2C, only master can initiate the communication, master Tx/Rx and slave Tx/Rx must be separated.</span></p></li></ul></li><li><p><span>I2C master Rx</span></p></li><li><p><span>I2C slave Tx</span></p></li><li><p><span>I2C slave Rx</span></p></li><li><p><span>I2C error interrupt handling</span></p></li><li><p><span>I2C event interrupt handling</span></p></li></ul><h3 id='spix-peripheral-configurable-items-for-user-applications'><span>SPIx Peripheral Configurable Items for User Applications</span></h3><ul><li><p><span>I2C_SCLSpeed</span></p></li><li><p><span>I2C_DeviceAddress</span></p></li><li><p><span>I2C_ACKControl</span></p><ul><li><p><span>I2C automatic ACKing is disabled by default. This item will provide the user the ability to enable/disable ACKing.</span></p></li></ul></li><li><p><span>I2C_FMDutyCycle</span></p><ul><li><p><span>This structure will give the user the ability to configure the duty cycle of the clock when the I2C peripheral is in &quot;fast mode&quot;.</span></p></li></ul></li></ul><h3 id='exercise'><span>Exercise</span></h3><ol start='' ><li><p><span>Create </span><code>stm32f407xx_i2c_driver.c</code><span> and </span><code>stm32f407xx_i2c_driver.h</code></p></li><li><p><span>Add I2Cx related details to MCU specific header file</span></p><ul><li><p><span>I2C peripheral register definition structure</span></p></li><li><p><span>I2Cx base address macros</span></p></li><li><p><span>I2Cx peripheral definition macros</span></p></li><li><p><span>Macros to enable and disable I2Cx peripheral clock</span></p></li><li><p><span>Bit position definitions of I2C peripheral</span></p></li></ul></li></ol><p>&nbsp;</p><h2 id='code'><span>Code</span></h2><h3 id='stm32f407xxi2cdriverh'><code>stm32f407xx_i2c_driver.h</code></h3><p><span>Path: </span><code>Project/Drivers/Inc/</code></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="c" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 53px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 45px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>140</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -45px; width: 45px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*******************************************************************************</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* File<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: stm32f407xx_i2c_driver.h</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: STM32F407xx MCU specific I2C driver header file</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Author<span class="cm-tab" role="presentation" cm-text="	">   </span>; Kyungjae Lee</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Date<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: Jun 09, 2023</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: This code includes only the features that are necessary for my</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  personal projects.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* ****************************************************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#ifndef STM32F407XX_I2C_DRIVER_H</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define STM32F407XX_I2C_DRIVER_H</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include "stm32f407xx.h"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*******************************************************************************</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2Cx peripheral structures</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">******************************************************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* I2Cx peripheral configuration structure */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-keyword">struct</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint32_t</span> <span class="cm-variable">I2C_SCLSpeed</span>;<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Available values @I2C_SCLSpeed<span class="cm-tab" role="presentation" cm-text="	">   </span> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">24</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span> <span class="cm-variable">I2C_DeviceAddress</span>;<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">/* Value will be entered by user<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">25</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span> <span class="cm-variable">I2C_ACKEnable</span>;<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Available values @I2C_ACKEnable<span class="cm-tab" role="presentation" cm-text="	">  </span> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">26</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span> <span class="cm-variable">I2C_FMDutyCycle</span>;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Available values @I2C_FMDutyCycle <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">27</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-variable">I2C_Config_TypeDef</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">28</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">29</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* I2Cx peripheral handle structure */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">30</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-keyword">struct</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">31</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">32</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_TypeDef</span> <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>;<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-comment">/* Base address of I2Cx(x:1,2,3) peripheral */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">33</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_Config_TypeDef</span> <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-variable">I2C_Config</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">34</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">*</span><span class="cm-variable">pTxBuffer</span>; <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Application Tx buffer address <span class="cm-tab" role="presentation" cm-text="	">   </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">35</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">*</span><span class="cm-variable">pRxBuffer</span>; <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Application Rx buffer address <span class="cm-tab" role="presentation" cm-text="	">   </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">36</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint32_t</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">TxLen</span>; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Number of bytes left to transmit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">37</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint32_t</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">RxLen</span>; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Number of bytes left to receive <span class="cm-tab" role="presentation" cm-text="	"> </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">38</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">TxRxState</span>; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Available values @I2C_TxRxState<span class="cm-tab" role="presentation" cm-text="	">  </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">39</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">DevAddr</span>; <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Slave/device address &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">   </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">40</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint32_t</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">RxSize</span>; <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Total size of data to receive <span class="cm-tab" role="presentation" cm-text="	">   </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">41</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">RepeatedStart</span>; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-comment">/* Repeated start enable/disable <span class="cm-tab" role="presentation" cm-text="	">   </span>*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">42</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-variable">I2C_Handle_TypeDef</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">43</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">44</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">45</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* @I2C_SCLSpeed</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">46</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* Note: Any clock frequency greater than 100 KHz is considered "fast mode".</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">47</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">48</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_SCL_SPEED_SM<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>100000<span class="cm-tab" role="presentation" cm-text="	">  </span></span><span class="cm-comment">/* 100 KHz */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">49</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_SCL_SPEED_FM_2K<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>200000<span class="cm-tab" role="presentation" cm-text="	">  </span></span><span class="cm-comment">/* 200 KHz */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">50</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_SCL_SPEED_FM_4K<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>400000<span class="cm-tab" role="presentation" cm-text="	">  </span></span><span class="cm-comment">/* 400 KHz */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">51</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">52</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">53</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* @I2C_ACKEnable</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">54</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* Note: ACKing is disabled by default.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">55</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">56</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_ACK_DISABLE<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">57</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_ACK_ENABLE<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">58</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">59</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">60</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* @I2C_FMDutyCycle (Fm mode duty cycle)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">61</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">62</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_FM_DUTY_2<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">63</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_FM_DUTY_16_9<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">64</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">65</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">66</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_TxRxState (I2C application communication state)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">67</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* Note: Unlike the SPI communication, I2C communication is half-duplex.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">68</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> Therefore, only one communication state variable is necessary.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">69</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">70</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_READY<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">71</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_BUSY_IN_RX<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">72</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_BUSY_IN_TX<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>2</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">73</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">74</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">75</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C application event macros</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">76</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">77</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_EV_TX_CMPLT<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">78</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_EV_RX_CMPLT<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">79</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_EV_STOP<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>2</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">80</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_ERROR_BERR<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>3</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">81</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_ERROR_ARLO<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>4</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">82</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_ERROR_AF  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>5</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">83</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_ERROR_OVR <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>6</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">84</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_ERROR_TIMEOUT<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span>7</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">85</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_EV_TX<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>8</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">86</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-meta">#define I2C_EV_RX<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>9</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">87</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">88</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">89</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*******************************************************************************</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">90</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* APIs supported by the I2C driver</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">91</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* (See function definitions for more information)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">92</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">******************************************************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">93</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">94</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* Peripheral clock setup */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">95</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_PeriClockControl</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">96</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">97</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">98</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* Init and De-init</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">99</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">100</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_Init</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">101</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_DeInit</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>);<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Utilize RCC_AHBxRSTR (AHBx peripheral reset register) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">102</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">103</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">104</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* Data send and receive</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">105</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">106</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_MasterTxBlocking</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable-3">*</span><span class="cm-variable">pTxBuffer</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">len</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">repeatedStartState</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">107</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_MasterRxBlocking</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable-3">*</span><span class="cm-variable">pRxBuffer</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">len</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">repeatedStartState</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">108</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">uint8_t</span> <span class="cm-def">I2C_MasterTxInterrupt</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable-3">*</span><span class="cm-variable">pTxBuffer</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">len</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">repeatedStartState</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">109</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">uint8_t</span> <span class="cm-def">I2C_MasterRxInterrupt</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable-3">*</span><span class="cm-variable">pRxBuffer</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">len</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">repeatedStartState</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">110</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_CloseTx</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">111</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_CloseRx</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">112</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_SlaveTx</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">data</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">113</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">uint8_t</span> <span class="cm-def">I2C_SlaveRx</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">114</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">115</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">116</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* IRQ configuration and ISR handling</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">117</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">118</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_IRQInterruptConfig</span>(<span class="cm-variable-3">uint8_t</span> <span class="cm-variable">irqNumber</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">119</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_IRQPriorityConfig</span>(<span class="cm-variable-3">uint8_t</span> <span class="cm-variable">irqNumber</span>, <span class="cm-variable-3">uint32_t</span> <span class="cm-variable">irqPriority</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">120</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_EV_IRQHandling</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">121</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_ER_IRQHandling</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">122</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">123</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">124</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* Other peripheral control APIs</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">125</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">126</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_PeriControl</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">127</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_ManageACK</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">128</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_GenerateSTARTCondition</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">129</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_GenerateSTOPCondition</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">130</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_SlaveEnableDisableCallbackEvents</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">131</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">132</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">133</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* Application callback functions (Must be implemented by application)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">134</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* Note: Since the driver does not know in which application this function will</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">135</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> be implemented, it is good idea to give a weak function definition.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">136</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">137</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_ApplicationEventCallback</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">appEvent</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">138</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">139</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -45px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 36px;">140</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#endif </span><span class="cm-comment">/* STM32F407XX_I2C_DRIVER_H */</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 3342px;"></div><div class="CodeMirror-gutters" style="height: 3342px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 44px;"></div></div></div></div></pre><p>&nbsp;</p><h3 id='stm32f407xxi2cdriverc'><code>stm32f407xx_i2c_driver.c</code></h3><p><span>Path: </span><code>Project/Drivers/Src/</code></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="c" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 62px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 54px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1100</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -54px; width: 54px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*******************************************************************************</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* File<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: stm32f407xx_i2c_driver.c</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: STM32F407xx MCU specific I2C driver source file</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Author<span class="cm-tab" role="presentation" cm-text="	">   </span>; Kyungjae Lee</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Date<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: Jun 09, 2023</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: This code includes only the features that are necessary for my</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  personal projects.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* ****************************************************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include "stm32f407xx.h"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* Declaration of I2C peripheral driver private functions */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">I2C_ExecuteAddressPhaseRead</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">I2C_ExecuteAddressPhaseWrite</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">I2C_ClearADDRFlag</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*******************************************************************************</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* APIs supported by the I2C driver</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* (See function definitions for more information)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">******************************************************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">24</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">25</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_PeriControl()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">26</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Enables or disables I2C peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">27</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">28</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @state - ENABLE or DISABLE macro</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">29</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">30</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">31</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">32</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_PeriControl</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">33</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">34</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">state</span> <span class="cm-operator">==</span> <span class="cm-variable">ENABLE</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">35</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">36</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR1</span> <span class="cm-operator">|=</span> (<span class="cm-number">1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR1_PE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">37</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">38</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">39</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">40</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR1</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR1_PE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">41</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">42</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_PeriControl */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">43</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">44</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">45</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_PeriClockControl()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">46</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Enable or disable clock for I2C peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">47</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">48</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">49</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">50</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">51</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_PeriClockControl</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">52</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">53</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">state</span> <span class="cm-operator">==</span> <span class="cm-variable">ENABLE</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">54</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">55</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2Cx</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C1</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">56</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C1_PCLK_EN</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">57</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">pI2Cx</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">58</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C2_PCLK_EN</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">59</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">pI2Cx</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C3</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">60</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C3_PCLK_EN</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">61</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">62</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">63</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">64</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2Cx</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C1</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">65</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C1_PCLK_DI</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">66</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">pI2Cx</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">67</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C2_PCLK_DI</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">68</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">pI2Cx</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C3</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">69</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C3_PCLK_DI</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">70</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">71</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_PeriClockControl */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">72</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">73</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">74</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_Init()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">75</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Initializes passed I2C peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">76</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">77</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">78</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">79</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">80</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_Init</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">81</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">82</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint32_t</span> <span class="cm-variable">temp</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">83</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">84</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable I2C1 peripheral clock */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">85</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_PeriClockControl</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">ENABLE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">86</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">87</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Configure I2C_CR1 (Enable ACK) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">88</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//temp |= pI2CHandle-&gt;I2C_Config.I2C_ACKEnable &lt;&lt; I2C_CR1_ACK;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">89</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//pI2CHandle-&gt;pI2Cx-&gt;CR1 = temp;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">90</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// Commented out since ACK bit cannot be set when PE=0. This will be done</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">91</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// in the application.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">92</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// (Consider moving this logic into 'I2C_PeriControl()' function. )</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">93</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">94</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Configure I2C_CR2 (FREQ[5:0])</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">95</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* The FREQ bits must be configured with the APB clock frequency value (I2C</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">96</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* peripheral connected to APB). The FREQ field is used by the peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">97</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* to generate data setup and hold times compliant with the I2C</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">98</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* specifications. The minimum allowed frequency is 2 MHz, the maximum</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">99</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* frequency is limited by the maximum APB frequency and cannot exceed</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">100</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* 50 MHz (peripheral intrinsic maximum limit).</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">101</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">102</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* 0b000000: Not allowed</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">103</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* 0b000001: Not allowed</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">104</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* 0b000010: 2 MHz</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">105</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* ...</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">106</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* 0b110010: 50 MHz</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">107</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Higher than 0b101010: Not allowed</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">108</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">109</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">110</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">|=</span> <span class="cm-variable">RCC_GetPCLK1Value</span>() <span class="cm-operator">/</span> <span class="cm-number">1000000</span>;<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">/* e.g., 16 MHz -&gt; 16 */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">111</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-variable">temp</span> <span class="cm-operator">&amp;</span> <span class="cm-number">0x3F</span>); <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">/* Masking for safety purpose */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">112</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">113</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Configure OAR1 (Device own address) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">114</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">115</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">|=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_DeviceAddress</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_OAR1_ADD71</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">116</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* bit[0] of OAR1 is used only when the own address is of 10-bit long</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">117</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* instead of 7-bit. big[15] of OAR1 determines the length of the</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">118</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* address (7 or 10). 7-bit length by default.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">119</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">120</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">14</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">121</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* bit[14] should always be kept at 1 by software (Reference manual) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">122</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">OAR1</span> <span class="cm-operator">|=</span> <span class="cm-variable">temp</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">123</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">124</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Configure CCR (Calaulate CCR) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">125</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint16_t</span> <span class="cm-variable">ccrVal</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">126</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">127</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">128</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_SCLSpeed</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">I2C_SCL_SPEED_SM</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">129</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">130</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Standard mode (I2C_CCR bit[15] == 0) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">131</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ccrVal</span> <span class="cm-operator">=</span> <span class="cm-variable">RCC_GetPCLK1Value</span>() <span class="cm-operator">/</span> (<span class="cm-number">2</span> <span class="cm-operator">*</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_SCLSpeed</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">132</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">|=</span> (<span class="cm-variable">ccrVal</span> <span class="cm-operator">&amp;</span> <span class="cm-number">0xFFF</span>); <span class="cm-comment">/* 12-bit value */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">133</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">134</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">135</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">136</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Fast mode (I2C_CCR bit[15] == 1) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">137</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CCR_FS</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">138</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">|=</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_FMDutyCycle</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CCR_DUTY</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">139</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">140</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_FMDutyCycle</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_FM_DUTY_2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">141</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">142</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ccrVal</span> <span class="cm-operator">=</span> <span class="cm-variable">RCC_GetPCLK1Value</span>() <span class="cm-operator">/</span> (<span class="cm-number">3</span> <span class="cm-operator">*</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_SCLSpeed</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">143</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">144</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">145</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">146</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ccrVal</span> <span class="cm-operator">=</span> <span class="cm-variable">RCC_GetPCLK1Value</span>() <span class="cm-operator">/</span> (<span class="cm-number">25</span> <span class="cm-operator">*</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_SCLSpeed</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">147</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">148</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">149</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">|=</span> (<span class="cm-variable">ccrVal</span> <span class="cm-operator">&amp;</span> <span class="cm-number">0xFFF</span>); <span class="cm-comment">/* 12-bit value */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">150</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">151</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">152</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CCR</span> <span class="cm-operator">|=</span> <span class="cm-variable">temp</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">153</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">154</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* TRISE configuration */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">155</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_SCLSpeed</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">I2C_SCL_SPEED_SM</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">156</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">157</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Standard mode */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">158</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">=</span> (<span class="cm-variable">RCC_GetPCLK1Value</span>() <span class="cm-operator">/</span> <span class="cm-number">1000000U</span>) <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">159</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">160</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">161</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">162</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Fast mode */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">163</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp</span> <span class="cm-operator">=</span> ((<span class="cm-variable">RCC_GetPCLK1Value</span>() <span class="cm-operator">*</span> <span class="cm-number">300U</span>) <span class="cm-operator">/</span> <span class="cm-number">1000000000U</span>) <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">164</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">165</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">166</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TRISE</span> <span class="cm-operator">=</span> (<span class="cm-variable">temp</span> <span class="cm-operator">&amp;</span> <span class="cm-number">0x3F</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">167</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_Init */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">168</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">169</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">170</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_DeInit()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">171</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Deinitializes passed I2C peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">172</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">173</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">174</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">175</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">176</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_DeInit</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">177</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">178</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Do nothing */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">179</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_DeInit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">180</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">181</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">182</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_MasterTxBlocking()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">183</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles blocking-based I2C transmission</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">184</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">185</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @pTxBuffer - address of the Tx buffer</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">186</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @len - length of the data to transmit</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">187</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @slaveAddr - slave address</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">188</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @repeatedStartState - I2C_REPEATED_START_EN or DI</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">189</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">190</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">191</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">192</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_MasterTxBlocking</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable-3">*</span><span class="cm-variable">pTxBuffer</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">len</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">repeatedStartState</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">193</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">194</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 1. Generate the START condition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">195</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_GenerateSTARTCondition</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>);<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">/* Helper function private to driver */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">196</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">197</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 2. Confirm that START generation is completed by checking the SB flag in</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">198</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  the SR1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">199</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: Until SB (Start Bit) gets cleared, SCL will be stretched</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">200</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> (pulled to LOW)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">201</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> According to the reference manual, SB bit can be cleared by</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">202</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> reading the SR1 register followed by writing the DR register,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">203</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> or by hardware when PE = 0.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">204</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">205</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ( <span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x01</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_SB</span>)) );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">206</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Reading SR1 register is done here. Writing the DR register will</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">207</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* be done in Step 3.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">208</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">209</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">210</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 3. Send the address of the slave with r/w bit set to w(0) (total 8 bits)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">211</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">212</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ExecuteAddressPhaseWrite</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">slaveAddr</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">213</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">214</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 4. Wait until the address phase is completed by checking the ADDR flag</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">215</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*<span class="cm-tab" role="presentation" cm-text="	">  </span>  of SR1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">216</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">217</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ( <span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x01</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_ADDR</span>)) );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">218</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">219</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 5. Clear the ADDR flag according to its software sequence (ADDR bit is</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">220</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  cleared by software reading SR1 register followed by reading SR2, or</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">221</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  by hardware when PE = 0.)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">222</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: Until ADDR is cleared SCL will be stretched (pulled to LOW)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">223</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">224</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ClearADDRFlag</span>(<span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">225</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">226</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 6. Send the data until @len becomes 0 */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">227</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> (<span class="cm-variable">len</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">228</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">229</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Wait until the TxE is set */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">230</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ( <span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_TxE</span>)) );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">231</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">232</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Copy @pTxBuffer contents to DR */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">233</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span> <span class="cm-operator">=</span> <span class="cm-operator">*</span><span class="cm-variable">pTxBuffer</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">234</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pTxBuffer</span><span class="cm-operator">++</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">235</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">len</span><span class="cm-operator">--</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">236</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">237</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">238</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 7. When @len becomes zero wait for TXE=1 and BTF=1 before generating the</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">239</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  STOP condition.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">240</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: TXE=1, BTF=1, means that both SR and DR are empty and next</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">241</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> transmission should begin when BTF=1 SCL will be stretched</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">242</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> (pulled to LOW)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">243</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">244</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ( <span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_TxE</span>)) );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">245</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">246</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ( <span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_BTF</span>)) );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">247</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">248</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">249</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 8. Generate STOP condition and master does not need to wait for the</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">250</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  completion of stop condition.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">251</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: generating STOP, automatically clears the BTF.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">252</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">253</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">repeatedStartState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_REPEATED_START_DI</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">254</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">255</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_GenerateSTOPCondition</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">256</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">257</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_MasterTxBlocking */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">258</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">259</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">260</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_MasterRxBlocking()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">261</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles blocking-based I2C reception</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">262</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">263</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @pTxBuffer - address of the Tx buffer</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">264</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @len - length of the data to transmit</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">265</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @slaveAddr - slave address</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">266</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @repeatedStartState - I2C_REPEATED_START_EN or DI</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">267</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">268</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">269</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">270</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_MasterRxBlocking</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable-3">*</span><span class="cm-variable">pRxBuffer</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">len</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">repeatedStartState</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">271</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">272</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 1. Generate the START condition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">273</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_GenerateSTARTCondition</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>);<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">/* Helper function private to driver */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">274</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">275</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 2. Confirm that START generation is completed by checking the SB flag in</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">276</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  the SR1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">277</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: Until SB (Start Bit) gets cleared, SCL will be stretched</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">278</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> (pulled to LOW)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">279</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> According to the reference manual, SB bit can be cleared by</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">280</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> reading the SR1 register followed by writing the DR register,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">281</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> or by hardware when PE = 0.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">282</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">283</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ( <span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x01</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_SB</span>)) );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">284</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Reading SR1 register is done here. Writing the DR register will</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">285</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* be done in Step 3.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">286</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">287</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 3. Send the address of the slave with r/w bit set to R(1) (total 8 bits)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">288</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">289</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ExecuteAddressPhaseRead</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">slaveAddr</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">290</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">291</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 4. Wait until the address phase is completed by checking the ADDR flag</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">292</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*<span class="cm-tab" role="presentation" cm-text="	">  </span>  of SR1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">293</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">294</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ( <span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x01</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_ADDR</span>)) );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">295</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">296</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">297</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* 5. Read data from the slave</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">298</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">299</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">300</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 5.1. Read the last byte */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">301</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">len</span> <span class="cm-operator">==</span> <span class="cm-number">1</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">302</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">303</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ACK */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">304</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ManageACK</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">I2C_ACK_DISABLE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">305</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">306</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear the ADDR flag */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">307</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ClearADDRFlag</span>(<span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">308</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">309</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Wait until the RxNE flag is set */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">310</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ( <span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x01</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_RxNE</span>)) );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">311</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">312</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Generate STOP condition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">313</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">repeatedStartState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_REPEATED_START_DI</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">314</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">315</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_GenerateSTOPCondition</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">316</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">317</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">318</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Read data into the Rx buffer */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">319</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">pRxBuffer</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">320</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">321</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">322</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 5.2. Read non-last byte */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">323</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">len</span> <span class="cm-operator">&gt;</span> <span class="cm-number">1</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">324</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">325</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear the ADDR flag */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">326</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ClearADDRFlag</span>(<span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">327</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Now, the data reception begins! */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">328</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">329</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Read the data until @len becomes zero */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">330</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> (<span class="cm-variable-3">uint32_t</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-variable">len</span>; <span class="cm-variable">i</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span><span class="cm-operator">--</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">331</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">332</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Wait until RxNE flag is set */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">333</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ( <span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x01</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_RxNE</span>)) );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">334</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">335</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Read the second to last byte */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">336</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">i</span> <span class="cm-operator">==</span> <span class="cm-number">2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">337</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">338</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ACK */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">339</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ManageACK</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">I2C_ACK_DISABLE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">340</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">341</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Generate STOP condition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">342</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">repeatedStartState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_REPEATED_START_DI</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">343</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">344</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_GenerateSTOPCondition</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">345</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">346</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">347</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">348</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Read the data from the DR into Rx buffer */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">349</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">pRxBuffer</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">350</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">351</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Increment the buffer address */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">352</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pRxBuffer</span><span class="cm-operator">++</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">353</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">354</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">355</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">356</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">357</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ACK (Before entering this function, ACK was enabled.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">358</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Make sure to re-enable ACK to restore the previous condition.) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">359</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_ACKEnable</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_ACK_ENABLE</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">360</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ManageACK</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">I2C_ACK_ENABLE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">361</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_MasterRxBlocking */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">362</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">363</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">364</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_MasterTxInterrupt()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">365</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles interrupt-based I2C transmission</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">366</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">367</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @pTxBuffer - address of the Tx buffer</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">368</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @len - length of the data to transmit</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">369</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @slaveAddr - slave address</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">370</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @repeatedStartState - I2C_REPEATED_START_EN or DI</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">371</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">372</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">373</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">374</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">uint8_t</span> <span class="cm-def">I2C_MasterTxInterrupt</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable-3">*</span><span class="cm-variable">pTxBuffer</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">len</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">repeatedStartState</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">375</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">376</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span> <span class="cm-variable">busyState</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">377</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">378</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> ((<span class="cm-variable">busyState</span> <span class="cm-operator">!=</span> <span class="cm-variable">I2C_BUSY_IN_TX</span>) <span class="cm-operator">&amp;&amp;</span> (<span class="cm-variable">busyState</span> <span class="cm-operator">!=</span> <span class="cm-variable">I2C_BUSY_IN_RX</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">379</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">380</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pTxBuffer</span> <span class="cm-operator">=</span> <span class="cm-variable">pTxBuffer</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">381</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxLen</span> <span class="cm-operator">=</span> <span class="cm-variable">len</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">382</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span><span class="cm-operator">=</span> <span class="cm-variable">I2C_BUSY_IN_TX</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">383</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DevAddr</span> <span class="cm-operator">=</span> <span class="cm-variable">slaveAddr</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">384</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RepeatedStart</span> <span class="cm-operator">=</span> <span class="cm-variable">repeatedStartState</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">385</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">386</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Generate START condition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">387</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_GenerateSTARTCondition</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">388</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* If successful, SB bit will bet set here */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">389</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">390</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">391</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Enable all available interrupts by setting the control bits</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">392</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">393</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ITBUFEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">394</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITBUFEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">395</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ITEVTEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">396</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITEVTEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">397</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ITERREN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">398</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITERREN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">399</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">400</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">401</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">busyState</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">402</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_MasterTxInterrupt */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">403</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">404</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">405</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_MasterRxInterrupt()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">406</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles interrupt-based I2C reception</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">407</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">408</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @pTxBuffer - address of the Tx buffer</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">409</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @len - length of the data to transmit</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">410</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @slaveAddr - slave address</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">411</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @repeatedStartState - I2C_REPEATED_START_EN or DI</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">412</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">413</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">414</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">415</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">uint8_t</span> <span class="cm-def">I2C_MasterRxInterrupt</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable-3">*</span><span class="cm-variable">pRxBuffer</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">len</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">repeatedStartState</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">416</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">417</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span> <span class="cm-variable">busyState</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">418</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">419</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> ((<span class="cm-variable">busyState</span> <span class="cm-operator">!=</span> <span class="cm-variable">I2C_BUSY_IN_TX</span>) <span class="cm-operator">&amp;&amp;</span> (<span class="cm-variable">busyState</span> <span class="cm-operator">!=</span> <span class="cm-variable">I2C_BUSY_IN_RX</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">420</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">421</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pRxBuffer</span> <span class="cm-operator">=</span> <span class="cm-variable">pRxBuffer</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">422</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxLen</span> <span class="cm-operator">=</span> <span class="cm-variable">len</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">423</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span><span class="cm-operator">=</span> <span class="cm-variable">I2C_BUSY_IN_RX</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">424</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxSize</span> <span class="cm-operator">=</span> <span class="cm-variable">len</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">425</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DevAddr</span> <span class="cm-operator">=</span> <span class="cm-variable">slaveAddr</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">426</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RepeatedStart</span> <span class="cm-operator">=</span> <span class="cm-variable">repeatedStartState</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">427</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">428</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Generate START condition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">429</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_GenerateSTARTCondition</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">430</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* If successful, SB bit will bet set here */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">431</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">432</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">433</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Enable all available interrupts by setting the control bits</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">434</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">435</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ITBUFEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">436</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-number">1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITBUFEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">437</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ITEVTEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">438</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-number">1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITEVTEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">439</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ITERREN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">440</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-number">1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITERREN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">441</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">442</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">443</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">444</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">busyState</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">445</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_MasterRxInterrupt */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">446</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">447</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">448</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_SlaveTx()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">449</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles transmission of a byte of data upon master's read event</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">450</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">451</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;  @data<span class="cm-tab" role="presentation" cm-text="	"> </span>- a byte of data to send</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">452</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">453</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">454</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">455</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_SlaveTx</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">data</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">456</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">457</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">458</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_SlaveTx */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">459</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">460</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">461</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_SlaveRx()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">462</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles reception of a byte of data upon master's write event</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">463</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">464</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @state - ENABLE or DISABLE macro</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">465</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: Received byte of data</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">466</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">467</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">468</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">uint8_t</span> <span class="cm-def">I2C_SlaveRx</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">469</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">470</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable-3">uint8_t</span>)<span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">471</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_SlaveRx */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">472</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">473</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">474</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_ManageACK()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">475</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Enables or disables @I2Cx peripheral's ACKing</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">476</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">477</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @state - ENABLE or DISABLE macro</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">478</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">479</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">480</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">481</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_ManageACK</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">482</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">483</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">state</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_ACK_ENABLE</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">484</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">485</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ACK */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">486</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR1</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR1_ACK</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">487</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">488</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">489</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">490</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ACK */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">491</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR1</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR1_ACK</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">492</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">493</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_ManageACK */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">494</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">495</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">496</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_IRQInterruptConfig()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">497</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Enables or disables I2C IRQ interrupts</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">498</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @irqNumber - IRQ number</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">499</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @state - ENABLE or DISABLE macro</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">500</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">501</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">502</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">503</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_IRQInterruptConfig</span>(<span class="cm-variable-3">uint8_t</span> <span class="cm-variable">irqNumber</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">504</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">505</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">state</span> <span class="cm-operator">==</span> <span class="cm-variable">ENABLE</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">506</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">507</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Configure NVIC_ISERx register */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">508</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">irqNumber</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">31</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">509</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">NVIC_ISER0</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">irqNumber</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">510</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-number">32</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">64</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">511</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">NVIC_ISER1</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">%</span> <span class="cm-number">32</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">512</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-number">65</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">96</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">513</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">NVIC_ISER2</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">%</span> <span class="cm-number">32</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">514</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">515</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">516</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">517</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Configure NVIC_ICERx register */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">518</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">irqNumber</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">31</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">519</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">NVIC_ICER0</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">irqNumber</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">520</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-number">32</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">64</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">521</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">NVIC_ICER1</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">%</span> <span class="cm-number">32</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">522</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-number">65</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">96</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">523</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">NVIC_ICER2</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">%</span> <span class="cm-number">32</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">524</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">525</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_IRQInterruptConfig */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">526</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">527</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">528</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_IRQPriorityConfig()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">529</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Configures I2C IRQ interrupt priorities</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">530</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @irqNumber - IRQ number</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">531</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @irqPriotity - IRQ priority (Make sure this parameter is of</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">532</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> type uint32_t. Due to the number of bits it</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">533</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> needs to be shifted during the calculation,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">534</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> declaring it as uint8_t did not do its job.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">535</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">536</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">537</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">538</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_IRQPriorityConfig</span>(<span class="cm-variable-3">uint8_t</span> <span class="cm-variable">irqNumber</span>, <span class="cm-variable-3">uint32_t</span> <span class="cm-variable">irqPriority</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">539</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">540</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Find out the IPR register */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">541</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span> <span class="cm-variable">iprNumber</span> <span class="cm-operator">=</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">/</span> <span class="cm-number">4</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">542</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span> <span class="cm-variable">iprSection</span> <span class="cm-operator">=</span> <span class="cm-variable">irqNumber</span> <span class="cm-operator">%</span> <span class="cm-number">4</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">543</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint8_t</span> <span class="cm-variable">bitOffset</span> <span class="cm-operator">=</span> (<span class="cm-variable">iprSection</span> <span class="cm-operator">*</span> <span class="cm-number">8</span>) <span class="cm-operator">+</span> (<span class="cm-number">8</span> <span class="cm-operator">-</span> <span class="cm-variable">NUM_PRI_BITS_USED</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">544</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span>(<span class="cm-variable">NVIC_IPR_BASE</span> <span class="cm-operator">+</span> <span class="cm-variable">iprNumber</span>) <span class="cm-operator">|=</span> (<span class="cm-variable">irqPriority</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">bitOffset</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">545</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_IRQPriorityConfig */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">546</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">547</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">548</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_EV_IRQHandling()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">549</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles I2C event IRQ (common for both master and slave modes)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">550</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">551</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">552</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: This function will first decode the event that occurred, and</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">553</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  handle the event accordingly.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">554</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">555</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_EV_IRQHandling</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">556</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">557</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint32_t</span> <span class="cm-variable">temp1</span>, <span class="cm-variable">temp2</span>, <span class="cm-variable">temp3</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">558</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">559</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp1</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITEVTEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">560</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp2</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITBUFEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">561</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp3</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_SB</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">562</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">563</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 1. Handle the interrupt generated by SB event</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">564</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: SB event is available only in master mode. Therefore, this block</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">565</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> will note be executed in slave mode. (For slave, SB bit is always</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">566</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> zero. Meaning that in I2C, slaves cannot start communication.)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">567</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">568</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp3</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">569</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">570</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* SB flag is set */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">571</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">572</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Execute the address phase */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">573</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_BUSY_IN_TX</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">574</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">575</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ExecuteAddressPhaseWrite</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DevAddr</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">576</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">577</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_BUSY_IN_RX</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">578</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">579</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ExecuteAddressPhaseRead</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DevAddr</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">580</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">581</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">582</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">583</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp3</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_ADDR</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">584</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 2. Handle the interrupt generated by ADDR event</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">585</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: When in master mode - Address is sent</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">586</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> When in slave mode - Address matched with own address</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">587</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">588</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp3</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">589</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">590</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* ADDR flag is set</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">591</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">592</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* When ADDR flag is set, clock will be stretched and both the master</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">593</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* and slave will be in wait state. So it is important to clear it</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">594</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* according to the logic.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">595</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">596</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ClearADDRFlag</span>(<span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">597</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">598</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">599</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp3</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_BTF</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">600</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 3. Handle the interrupt generated by BTF event */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">601</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp3</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">602</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">603</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* BTF (Byte Transfer Finished) flag is set</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">604</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">605</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* When BTF flag is set:</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">606</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">607</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* 1. If TxE=1 during transmission</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">608</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  - Both SR and DR are empty</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">609</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  - Clock will be stretched</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">610</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* 2. If RxNe=1 during reception</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">611</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  - Both SR and DR are full</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">612</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span>  - Clock will be stretched</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">613</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">614</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_BUSY_IN_TX</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">615</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">616</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* If TxE=1 */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">617</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_TxE</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">618</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">619</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">620</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* BTF=1 &amp; TxE=1; Close I2C data transmission</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">621</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">622</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">623</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check if the Tx length is 0 */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">624</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxLen</span> <span class="cm-operator">==</span> <span class="cm-number">0</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">625</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">626</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 1. Generate STOP condition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">627</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RepeatedStart</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_REPEATED_START_DI</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">628</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">629</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_GenerateSTOPCondition</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">630</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">631</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">632</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 2. Reset all the members of the handle structure */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">633</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_CloseTx</span>(<span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">634</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">635</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 3. Notify the application about transmission complete */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">636</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_EV_TX_CMPLT</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">637</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">638</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">639</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">640</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_BUSY_IN_RX</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">641</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">642</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Do nothing */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">643</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">644</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">645</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">646</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp3</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_STOPF</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">647</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 4. Handle the interrupt generated by STOPF event</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">648</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: STOP event detection (STOPF) is available only in slave mode.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">649</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> (In master mode, STOPF flag will not be set.)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">650</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> STOPF flag is set by hardware when a STOP condition is detected</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">651</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> on the bus by the slave after an Acknowledgement (ACK=1).</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">652</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> STOPF flag is cleared by software reading the SR1 register</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">653</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> followed by a write in the CR1 register,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">654</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> or by hardware when PE=0.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">655</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">656</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">657</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp3</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">658</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">659</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* STOPF flag is set */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">660</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">661</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear STOPF (i.e., Read SR1, write to CR1)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">662</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: Reading SR1 is already done in the previous line of code</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">663</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">664</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Write to CR1 */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">665</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR1</span> <span class="cm-operator">|=</span> <span class="cm-number">0x0000</span>; <span class="cm-comment">/* Write without affecting CR1 */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">666</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">667</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Notify the application of the STOP detection */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">668</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_EV_STOP</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">669</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">670</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">671</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp3</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_TxE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">672</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 5. Handle the interrupt generated by TxE event */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">673</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp2</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp3</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">674</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">675</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* TxE flag is set, perform the data transmission</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">676</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Note: This is an indication that DR is empty, and software can</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">677</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> put data into DR in order to send the data byte to the</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">678</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> external world.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">679</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">680</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">681</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check for device mode */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">682</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR2</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR2_MSL</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">683</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">684</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Device is master */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">685</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">686</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_BUSY_IN_TX</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">687</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">688</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxLen</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">689</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">690</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 1. Load the data into DR */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">691</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span> <span class="cm-operator">=</span> <span class="cm-operator">*</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pTxBuffer</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">692</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">693</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 2. Decrement TxLen */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">694</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxLen</span><span class="cm-operator">--</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">695</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">696</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 3. Increment the Tx buffer address */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">697</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pTxBuffer</span><span class="cm-operator">++</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">698</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">699</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">700</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">701</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">702</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">703</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Device is slave */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">704</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">705</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR2</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR2_TRA</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">706</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">707</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Slave in transmitter mode */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">708</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">709</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_EV_TX</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">710</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">711</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">712</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">713</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">714</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">715</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp3</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_RxNE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">716</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 6. Handle the interrupt generated by RxNE event */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">717</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp2</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp3</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">718</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">719</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* RxNE flag is set */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">720</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">721</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check for device mode */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">722</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR2</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR2_MSL</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">723</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">724</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Device is master */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">725</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">726</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_BUSY_IN_RX</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">727</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">728</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Perform the data reception */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">729</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">730</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxSize</span> <span class="cm-operator">==</span> <span class="cm-number">1</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">731</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">732</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pRxBuffer</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">733</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxLen</span><span class="cm-operator">--</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">734</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">735</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">736</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxSize</span> <span class="cm-operator">&gt;</span> <span class="cm-number">1</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">737</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">738</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxLen</span> <span class="cm-operator">==</span> <span class="cm-number">2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">739</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">740</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear the ACK bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">741</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ManageACK</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">DISABLE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">742</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">743</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">744</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Read DR */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">745</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pRxBuffer</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">746</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pRxBuffer</span><span class="cm-operator">++</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">747</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxLen</span><span class="cm-operator">--</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">748</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">749</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">750</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxLen</span> <span class="cm-operator">==</span> <span class="cm-number">0</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">751</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">752</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">753</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* No more data to receive. Close the I2C data reception</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">754</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* and notify the application of the communication termination.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">755</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">756</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">757</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 1. Generate STOP condition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">758</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RepeatedStart</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_REPEATED_START_DI</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">759</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">760</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_GenerateSTOPCondition</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">761</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">762</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">763</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 2. Close I2C Rx */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">764</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_CloseRx</span>(<span class="cm-variable">pI2CHandle</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">765</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">766</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* 3. Notify the application */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">767</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_EV_RX_CMPLT</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">768</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">769</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">770</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">771</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">772</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">773</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Device is slave */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">774</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">775</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-operator">!</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR2</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR2_TRA</span>)))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">776</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">777</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Slave in transmitter mode */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">778</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">779</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_EV_RX</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">780</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">781</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">782</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">783</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_EV_IRQHandling */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">784</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">785</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">786</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_ER_IRQHandling()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">787</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles I2C error IRQ (common for both master and slave modes)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">788</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">789</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">790</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">791</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">792</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_ER_IRQHandling</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">793</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">794</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint32_t</span> <span class="cm-variable">temp1</span>, <span class="cm-variable">temp2</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">795</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">796</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check the status of SR2 ITERREN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">797</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp2</span> <span class="cm-operator">=</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span>) <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITERREN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">798</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">799</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check for bus error (BERR) *********************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">800</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">801</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp1</span> <span class="cm-operator">=</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span>) <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_BERR</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">802</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">803</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">804</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">805</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Handle bus error</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">806</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">807</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">808</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear the bus error flag */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">809</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_BERR</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">810</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">811</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Notify the application of this error */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">812</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_ERROR_BERR</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">813</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">814</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">815</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check for arbitration lost (ARLO) **************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">816</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">817</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp1</span> <span class="cm-operator">=</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span>) <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_ARLO</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">818</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">819</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">820</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">821</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Handle arbitration lost error</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">822</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">823</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">824</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear the arbitration lost error flag */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">825</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_ARLO</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">826</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">827</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Notify the application of this error */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">828</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_ERROR_ARLO</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">829</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">830</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">831</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check for ACK failure (AF) *********************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">832</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">833</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp1</span> <span class="cm-operator">=</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span>) <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_AF</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">834</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">835</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">836</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">837</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Handle ACK failure error</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">838</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">839</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">840</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear the ACK failure error flag */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">841</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_AF</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">842</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">843</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Notify the application of this error */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">844</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_ERROR_AF</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">845</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">846</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">847</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check for overrun/underrun (OVR) ***************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">848</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">849</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp1</span> <span class="cm-operator">=</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span>) <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_OVR</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">850</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">851</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">852</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">853</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Handle overrun/underrun error</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">854</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">855</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">856</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear the overrun/underrun error flag */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">857</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_OVR</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">858</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">859</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Notify the application of this error */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">860</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_ERROR_OVR</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">861</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">862</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">863</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check for timeout error (TIMEOUT) **************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">864</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">865</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">temp1</span> <span class="cm-operator">=</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span>) <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_TIMEOUT</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">866</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">temp1</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">temp2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">867</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">868</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">869</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Handle timeout error</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">870</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">871</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">872</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear the timeout error flag */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">873</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR1_TIMEOUT</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">874</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">875</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Notify the application of this error */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">876</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ApplicationEventCallback</span>(<span class="cm-variable">pI2CHandle</span>, <span class="cm-variable">I2C_ERROR_TIMEOUT</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">877</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">878</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_ER_IRQHandling */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">879</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">880</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">881</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_CloseTx()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">882</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles closing I2C Tx operation</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">883</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">884</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">885</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">886</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">887</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_CloseTx</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">888</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">889</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ITBUFEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">890</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITBUFEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">891</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">892</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ITEVTEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">893</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITEVTEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">894</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">895</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Reset I2C handle members */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">896</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span> <span class="cm-operator">=</span> <span class="cm-variable">I2C_READY</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">897</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pTxBuffer</span> <span class="cm-operator">=</span> <span class="cm-variable">NULL</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">898</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxLen</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">899</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_CloseTx */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">900</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">901</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">902</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_CloseRx()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">903</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Handles closing I2C Rx operation</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">904</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">905</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">906</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">907</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">908</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_CloseRx</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">909</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">910</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ITBUFEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">911</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITBUFEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">912</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">913</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ITEVTEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">914</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITEVTEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">915</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">916</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Reset I2C handle members */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">917</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span> <span class="cm-operator">=</span> <span class="cm-variable">I2C_READY</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">918</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pRxBuffer</span> <span class="cm-operator">=</span> <span class="cm-variable">NULL</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">919</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxLen</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">920</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxSize</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">921</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">922</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ACK */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">923</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">I2C_Config</span>.<span class="cm-variable">I2C_ACKEnable</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_ACK_ENABLE</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">924</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">925</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ManageACK</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">ENABLE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">926</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">927</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_CloseRx */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">928</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">929</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">930</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_GenerateSTARTCondition()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">931</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Generates I2C START condition</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">932</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">933</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">934</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">935</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">936</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_GenerateSTARTCondition</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">937</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">938</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR1</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR1_START</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">939</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_GenerateSTARTCondition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">940</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">941</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">942</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_GenerateSTOPCondition()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">943</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Generates I2C START condition</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">944</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">945</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">946</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">947</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">948</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_GenerateSTOPCondition</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">949</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">950</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR1</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR1_STOP</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">951</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_GenerateSTOPCondition */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">952</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">953</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">954</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_SlaveEnableDisableCallbackEvents()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">955</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Enables or disables @pI2Cx's (as a slave) callback events</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">956</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">957</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @state - ENABLE or DISABLE macro</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">958</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">959</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">960</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">961</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">I2C_SlaveEnableDisableCallbackEvents</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">state</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">962</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">963</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">state</span> <span class="cm-operator">==</span> <span class="cm-variable">ENABLE</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">964</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">965</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">966</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Enable all available interrupts by setting the control bits</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">967</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">968</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ITBUFEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">969</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITBUFEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">970</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ITEVTEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">971</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITEVTEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">972</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Enable ITERREN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">973</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">|=</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITERREN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">974</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">975</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">976</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">977</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">978</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Disable all available interrupts by setting the control bits</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">979</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">980</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ITBUFEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">981</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITBUFEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">982</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ITEVTEN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">983</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITEVTEN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">984</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ITERREN control bit */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">985</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">CR2</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_CR2_ITERREN</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">986</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">987</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_SlaveEnableDisableCallbackEvents */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">988</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">989</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">990</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_ApplicationEventCallback()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">991</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Notifies the application of the event occurred</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">992</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C handle structure</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">993</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @appEvent - I2C event occurred</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">994</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">995</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: This function must be implemented by the application. Since the driver</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">996</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  does not know in which application this function will be implemented,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">997</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  the driver defines it as a weak function. The application may override</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">998</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  this function.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">999</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  If the application does not implement this function, the following</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1000</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  definition will be executed.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1001</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1002</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">__WEAK</span> <span class="cm-variable-3">void</span> <span class="cm-def">I2C_ApplicationEventCallback</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">appEvent</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1003</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1004</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Implemented in the application */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1005</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_ApplicationEventCallback */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1006</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1007</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1008</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*******************************************************************************</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1009</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C driver private functions</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1010</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">******************************************************************************/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1011</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1012</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1013</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_ExecuteAddressPhaseRead()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1014</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Executes address phase for I2C read operation</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1015</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1016</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @slaveAddr - slave address</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1017</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1018</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1019</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1020</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">I2C_ExecuteAddressPhaseRead</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1021</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1022</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Shift 7-bit slave address to left 1 bit position to make room for</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1023</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* r/w bit. Slave address (1 byte) = 7-bit slave address + r/w bit (1).</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1024</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1025</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slaveAddr</span> <span class="cm-operator">&lt;&lt;=</span> <span class="cm-number">1</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1026</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slaveAddr</span> <span class="cm-operator">|=</span> <span class="cm-number">1</span>;<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Set bit[0] */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1027</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span> <span class="cm-operator">=</span> <span class="cm-variable">slaveAddr</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1028</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_ExecuteAddressPhaseRead */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1029</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1030</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1031</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_ExecuteAddressPhaseWrite()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1032</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Executes address phase for I2C write operation</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1033</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2Cx - base address of I2Cx peripheral</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1034</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  @slaveAddr - slave address</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1035</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1036</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: N/A</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1037</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1038</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">I2C_ExecuteAddressPhaseWrite</span>(<span class="cm-variable">I2C_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable-3">uint8_t</span> <span class="cm-variable">slaveAddr</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1039</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1040</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Shift 7-bit slave address to left 1 bit position to make room for</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1041</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* r/w bit. Slave address (1 byte) = 7-bit slave address + r/w bit (0).</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1042</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1043</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slaveAddr</span> <span class="cm-operator">&lt;&lt;=</span> <span class="cm-number">1</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1044</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slaveAddr</span> <span class="cm-operator">&amp;=</span> <span class="cm-variable">~</span>(<span class="cm-number">1</span>);<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">/* Clear bit[0] */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1045</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">DR</span> <span class="cm-operator">=</span> <span class="cm-variable">slaveAddr</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1046</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_ExecuteAddressPhaseWrite */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1047</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1048</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1049</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">* I2C_ClearADDRFlag()</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1050</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Brief<span class="cm-tab" role="presentation" cm-text="	">    </span>: Clears the ADDR bit of I2Cx SR1 register</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1051</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Param<span class="cm-tab" role="presentation" cm-text="	">    </span>: @pI2CHandle - pointer to I2C peripheral handle</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1052</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Retval<span class="cm-tab" role="presentation" cm-text="	">   </span>: None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1053</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* Note<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>: ADDR bit is cleared by software reading SR1 register followed by</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1054</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  reading SR2, or by hardware when PE = 0.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1055</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"> <span class="cm-comment">* <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  This function is a private helper function.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1056</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1057</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-def">I2C_ClearADDRFlag</span>(<span class="cm-variable">I2C_Handle_TypeDef</span> <span class="cm-operator">*</span><span class="cm-variable">pI2CHandle</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1058</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1059</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">uint32_t</span> <span class="cm-variable">dummyRead</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1060</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1061</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Check for the device mode */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1062</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR2</span> <span class="cm-operator">&amp;</span> (<span class="cm-number">0x1</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">I2C_SR2_MSL</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1063</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1064</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1065</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Device is in master mode</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1066</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1067</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1068</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">TxRxState</span> <span class="cm-operator">==</span> <span class="cm-variable">I2C_BUSY_IN_RX</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1069</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1070</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">RxSize</span> <span class="cm-operator">==</span> <span class="cm-number">1</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1071</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1072</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Disable ACK first */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1073</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">I2C_ManageACK</span>(<span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span>, <span class="cm-variable">DISABLE</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1074</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1075</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear ADDR flag (Read SR1, read SR2) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1076</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dummyRead</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1077</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dummyRead</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR2</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1078</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>(<span class="cm-variable-3">void</span>)<span class="cm-variable">dummyRead</span>;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* To suppress 'unused variable' warning */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1079</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1080</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1081</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1082</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1083</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear ADDR flag (Read SR1, read SR2) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1084</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dummyRead</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1085</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dummyRead</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR2</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1086</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>(<span class="cm-variable-3">void</span>)<span class="cm-variable">dummyRead</span>;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* To suppress 'unused variable' warning */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1087</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1088</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1089</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1090</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1091</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1092</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* Device is in slave mode</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1093</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">*/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1094</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1095</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* Clear ADDR flag (Read SR1, read SR2) */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1096</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dummyRead</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR1</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1097</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dummyRead</span> <span class="cm-operator">=</span> <span class="cm-variable">pI2CHandle</span><span class="cm-operator">-&gt;</span><span class="cm-variable">pI2Cx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">SR2</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1098</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>(<span class="cm-variable-3">void</span>)<span class="cm-variable">dummyRead</span>;<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/* To suppress 'unused variable' warning */</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 45px;">1099</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -54px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 45px;">1100</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">/* End of I2C_ClearADDRFlag */</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 25605px;"></div><div class="CodeMirror-gutters" style="height: 25605px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 53px;"></div></div></div></div></pre></div></div>
<footer>
<p style="text-align: center;"><i>- Original works by Kyungjae Lee -</i></p>
</footer> </body>
</html>